(function(t){function e(e){for(var a,o,c=e[0],r=e[1],h=e[2],u=0,d=[];u<c.length;u++)o=c[u],i[o]&&d.push(i[o][0]),i[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);l&&l(e);while(d.length)d.shift()();return s.push.apply(s,h||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,c=1;c<n.length;c++){var r=n[c];0!==i[r]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var h=0;h<c.length;h++)e(c[h]);var l=r;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85da"),i=n.n(a);i.a},"09c7":function(t,e,n){"use strict";var a=n("81f4"),i=n.n(a);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("dac5"),n("6e26"),n("9604"),n("df67");var a=n("6e6d"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("draw")],1)},s=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("div",{staticClass:"content"},[n("div",{staticClass:"content-right"},[n("div",{staticClass:"body"},[n("canvas",{ref:"canvas",staticStyle:{"border-radius":"15px","margin-top":"35px","margin-left":"35px"},style:{cursor:t.curcursor,width:t.canvasSize.width+"px",height:t.canvasSize.height+"px"},attrs:{id:"canvas"}}),n("canvas",{ref:"canvas_bak",staticStyle:{"border-radius":"15px","margin-top":"35px","margin-left":"35px"},style:{cursor:t.curcursor,width:t.canvasSize.width+"px",height:t.canvasSize.height+"px"},attrs:{id:"canvas_bak"}})]),n("div",{staticStyle:{"padding-top":"10px","padding-left":"80px"}},[n("el-button",{on:{click:t.clearPlotData}},[t._v("Clear")]),n("el-button",{on:{click:t.saveImageData}},[t._v("Submit")])],1)]),n("div",{staticClass:"div-identify-result"},[n("strong",[t._v("Print：")]),n("span",[t._v(t._s(this.identifyResult))])])])])},c=[],r=n("2427"),h={name:"Draw",data:function(){return{canvasSize:{width:300,height:300},canvas:this.$refs.canvas,canvasTop:67,canvasLeft:0,context:null,canvas_bak:this.$refs.canvas_bak,context_bak:null,toolsToggle:!1,color:{hex:"#000000",a:1},penSize:8,lineType:[0,0],canDraw:!1,curcursor:"auto",tools:[{name:"铅笔",icon:"mode_edit",fun:"pencil",ischoose:!1}],identifyResult:"-"}},methods:{initCanvas:function(){this.canvas=document.getElementById("canvas"),this.canvas.width=this.canvasSize.width,this.canvas.height=this.canvasSize.height,this.context=this.canvas.getContext("2d"),this.context.fillStyle="#FFFFFF",this.context.fillRect(0,0,this.canvasSize.width,this.canvasSize.height),this.canvas_bak=document.getElementById("canvas_bak"),this.canvas_bak.width=this.canvasSize.width,this.canvas_bak.height=this.canvasSize.height,this.context_bak=this.canvas_bak.getContext("2d"),this.context_bak.fillStyle="#FFFFFF",this.context_bak.fillRect(0,0,this.canvasSize.width,this.canvasSize.height)},drawType:function(t){switch(t.fun){case"pencil":this.curcursor="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAZ0lEQVR4AdXOrQ2AMBRF4bMc/zOUOSrYoYI5cQQwpAieQDW3qQBO7Xebxx8bWAk5/CASmRHzRHtB+d0Bkw0W5ZiT0SYbFcl6u/2eeJHbxIHOhWO6Er6/y9syXpMul5PLefAGKZ1/rwtTimwbWLpiCgAAAABJRU5ErkJggg==') 3 24,  auto";break;default:this.curcursor="auto";break}this.draw_graph(t.fun),this.chooseImg(t)},chooseImg:function(t){for(var e=0;e<this.tools.length;e++)this.tools[e].ischoose=!1;t.ischoose=!0},draw_graph:function(t){var e,n,a=this;this.canvas_bak.style.zIndex=1,this.canDraw=!1;var i=function(i){a.context.strokeStyle=a.color.hex,a.context_bak.strokeStyle=a.color.hex,a.context_bak.lineWidth=a.penSize,i=i||window.event,e=i.offsetX,n=i.offsetY,a.context_bak.moveTo(e,n),a.canDraw=!0,"pencil"==t&&a.context_bak.beginPath()},s=function(t){t=t||window.event,a.canDraw=!1;var e=new Image;e.src=a.canvas_bak.toDataURL(),e.onload=function(){a.context.drawImage(e,0,0,e.width,e.height,0,0,a.canvasSize.width,a.canvasSize.height),a.clearContext()};var n=t.offsetX,i=t.offsetY;a.context.beginPath(),a.context.moveTo(n,i),a.context.lineTo(n+2,i+2),a.context.stroke()},o=function(e){e=e||window.event,a.context_bak.setLineDash(a.lineType),console.log("Mouse move:",e.offsetX,e.offsetY),"pencil"==t&&a.canDraw&&(a.context_bak.lineTo(e.offsetX,e.offsetY),a.context_bak.stroke())},c=function(){"handwriting"!=t&&a.clearContext()};this.canvas_bak.onmousedown=function(){return i()},this.canvas_bak.onmousemove=function(){return o()},this.canvas_bak.onmouseup=function(){return s()},this.canvas_bak.onmouseout=function(){return c()}},clearContext:function(t){t?(this.context.clearRect(0,0,this.canvasSize.width,this.canvasSize.height),this.context_bak.clearRect(0,0,this.canvasSize.width,this.canvasSize.height)):this.context_bak.clearRect(0,0,this.canvasSize.width,this.canvasSize.height)},saveImageData:function(){var t=this.canvas.toDataURL("image/jpeg","image/jpeg");console.log("This:",this.axios),r.post("/api/mnist/identify",{data:t}).then(function(t){console.log(t),void 0!==t.data&&(this.identifyResult=t.data.predict)}.bind(this)).catch(function(t){console.log(t)}),console.log("Data:",t)},addkeyBoardlistener:function(){var t=arguments;document.onkeydown=function(e){e||window.event||t.callee.caller.arguments[0]}},clearPlotData:function(){this.clearContext(!0),this.context.fillStyle="#FFFFFF",this.context.fillRect(0,0,this.canvasSize.width,this.canvasSize.height),this.context_bak.fillStyle="#FFFFFF",this.context_bak.fillRect(0,0,this.canvasSize.width,this.canvasSize.height)}},components:{},mounted:function(){var t=this;this.initCanvas(),this.addkeyBoardlistener(),this.drawType(this.tools[0]),this.canvas_bak.addEventListener("click",this.falseColor),window.addEventListener("resize",function(){t.canvasSize={}})}},l=h,u=(n("09c7"),n("6691")),d=Object(u["a"])(l,o,c,!1,null,"1733129f",null),f=d.exports,v={name:"app",components:{Draw:f}},p=v,g=(n("034f"),Object(u["a"])(p,i,s,!1,null,null,null)),b=g.exports,x=n("20ad"),w=n.n(x);n("8720");a["default"].use(w.a),a["default"].config.productionTip=!1,new a["default"]({render:function(t){return t(b)}}).$mount("#app")},"81f4":function(t,e,n){},"85da":function(t,e,n){}});
//# sourceMappingURL=app.3870c976.js.map