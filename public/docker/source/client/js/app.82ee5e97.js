(function(t){function e(e){for(var a,c,o=e[0],r=e[1],h=e[2],u=0,v=[];u<o.length;u++)c=o[u],i[c]&&v.push(i[c][0]),i[c]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);l&&l(e);while(v.length)v.shift()();return s.push.apply(s,h||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var r=n[o];0!==i[r]&&(a=!1)}a&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},i={app:0},s=[];function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var h=0;h<o.length;h++)e(o[h]);var l=r;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0338":function(t,e,n){},"034f":function(t,e,n){"use strict";var a=n("85da"),i=n.n(a);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("dac5"),n("6e26"),n("9604"),n("df67");var a=n("6e6d"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("draw")],1)},s=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[t._m(0),n("div",{staticClass:"content"},[n("div",{staticClass:"content-right"},[n("div",{staticClass:"body",style:{width:t.canvasSize.width+"px",height:t.canvasSize.height+"px"}},[n("canvas",{ref:"canvas",style:{cursor:t.curcursor},attrs:{id:"canvas"}}),n("canvas",{ref:"canvas_bak",style:{cursor:t.curcursor},attrs:{id:"canvas_bak"}})]),n("div",[n("el-button",{on:{click:t.clearPlotData}},[t._v("Clear")]),n("el-button",{on:{click:t.saveImageData}},[t._v("Save")])],1)])])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",{staticClass:"logo"},[n("span",[t._v("Drawing")])])])}],r=n("2427"),h={name:"Draw",data:function(){return{canvasSize:{width:200,height:200},canvas:this.$refs.canvas,canvasTop:67,canvasLeft:0,context:null,canvas_bak:this.$refs.canvas_bak,context_bak:null,toolsToggle:!1,color:{hex:"#000000",a:1},penSize:8,lineType:[0,0],canDraw:!1,curcursor:"auto",tools:[{name:"铅笔",icon:"mode_edit",fun:"pencil",ischoose:!1}]}},methods:{initCanvas:function(){this.canvas=document.getElementById("canvas"),this.canvas.width=this.canvasSize.width,this.canvas.height=this.canvasSize.height,this.context=this.canvas.getContext("2d"),this.context.fillStyle="#FFFFFF",this.context.fillRect(0,0,this.canvasSize.width,this.canvasSize.height),this.canvas_bak=document.getElementById("canvas_bak"),this.canvas_bak.width=this.canvasSize.width,this.canvas_bak.height=this.canvasSize.height,this.context_bak=this.canvas_bak.getContext("2d"),this.context_bak.fillStyle="#FFFFFF",this.context_bak.fillRect(0,0,this.canvasSize.width,this.canvasSize.height)},drawType:function(t){switch(t.fun){case"pencil":this.curcursor="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAAZ0lEQVR4AdXOrQ2AMBRF4bMc/zOUOSrYoYI5cQQwpAieQDW3qQBO7Xebxx8bWAk5/CASmRHzRHtB+d0Bkw0W5ZiT0SYbFcl6u/2eeJHbxIHOhWO6Er6/y9syXpMul5PLefAGKZ1/rwtTimwbWLpiCgAAAABJRU5ErkJggg==') 3 24,  auto";break;default:this.curcursor="auto";break}this.draw_graph(t.fun),this.chooseImg(t)},chooseImg:function(t){for(var e=0;e<this.tools.length;e++)this.tools[e].ischoose=!1;t.ischoose=!0},draw_graph:function(t){var e,n,a=this;this.canvas_bak.style.zIndex=1,this.canDraw=!1;var i=function(i){a.context.strokeStyle=a.color.hex,a.context_bak.strokeStyle=a.color.hex,a.context_bak.lineWidth=a.penSize,i=i||window.event,e=i.clientX-a.canvasLeft,n=i.clientY-a.canvasTop,a.context_bak.moveTo(e,n),a.canDraw=!0,"pencil"==t&&a.context_bak.beginPath()},s=function(t){t=t||window.event,a.canDraw=!1;var e=new Image;e.src=a.canvas_bak.toDataURL(),e.onload=function(){a.context.drawImage(e,0,0,e.width,e.height,0,0,a.canvasSize.width,a.canvasSize.height),a.clearContext()};var n=t.clientX-a.canvasLeft,i=t.clientY-a.canvasTop;a.context.beginPath(),a.context.moveTo(n,i),a.context.lineTo(n+2,i+2),a.context.stroke()},c=function(e){e=e||window.event,a.context_bak.setLineDash(a.lineType),"pencil"==t&&a.canDraw&&(a.context_bak.lineTo(e.offsetX,e.offsetY),a.context_bak.stroke())},o=function(){"handwriting"!=t&&a.clearContext()};this.canvas_bak.onmousedown=function(){return i()},this.canvas_bak.onmousemove=function(){return c()},this.canvas_bak.onmouseup=function(){return s()},this.canvas_bak.onmouseout=function(){return o()}},clearContext:function(t){t?(this.context.clearRect(0,0,this.canvasSize.width,this.canvasSize.height),this.context_bak.clearRect(0,0,this.canvasSize.width,this.canvasSize.height)):this.context_bak.clearRect(0,0,this.canvasSize.width,this.canvasSize.height)},saveImageData:function(){var t=this.canvas.toDataURL("image/jpeg","image/jpeg");console.log("This:",this.axios),r.post("/api/mnist/identify",{data:t}).then(function(t){console.log(t)}).catch(function(t){console.log(t)}),console.log("Data:",t)},addkeyBoardlistener:function(){var t=arguments;document.onkeydown=function(e){e||window.event||t.callee.caller.arguments[0]}},clearPlotData:function(){this.clearContext(!0),this.context.fillStyle="#FFFFFF",this.context.fillRect(0,0,this.canvasSize.width,this.canvasSize.height),this.context_bak.fillStyle="#FFFFFF",this.context_bak.fillRect(0,0,this.canvasSize.width,this.canvasSize.height)}},components:{},mounted:function(){var t=this;this.initCanvas(),this.addkeyBoardlistener(),this.drawType(this.tools[0]),this.canvas_bak.addEventListener("click",this.falseColor),window.addEventListener("resize",function(){t.canvasSize={width:window.screen.availWidth-320,height:.75*window.screen.availHeight}})}},l=h,u=(n("df75"),n("6691")),v=Object(u["a"])(l,c,o,!1,null,"8d60e7a0",null),d=v.exports,f={name:"app",components:{Draw:d}},p=f,g=(n("034f"),Object(u["a"])(p,i,s,!1,null,null,null)),w=g.exports,b=n("20ad"),x=n.n(b);n("8720");a["default"].use(x.a),a["default"].config.productionTip=!1,new a["default"]({render:function(t){return t(w)}}).$mount("#app")},"85da":function(t,e,n){},df75:function(t,e,n){"use strict";var a=n("0338"),i=n.n(a);i.a}});
//# sourceMappingURL=app.82ee5e97.js.map